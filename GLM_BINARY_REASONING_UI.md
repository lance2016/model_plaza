# âœ… æ™ºè°±GLMæ€è€ƒæ¨¡å¼UIé€‚é…å®Œæˆ

## ğŸ¯ é—®é¢˜è§£å†³

### é—®é¢˜æè¿°
æ™ºè°±GLMæ¨¡å‹çš„æ€è€ƒåŠŸèƒ½åªæœ‰å¼€å…³ï¼ˆå¯ç”¨/ç¦ç”¨ï¼‰ï¼Œä½†UIä¸Šæ˜¾ç¤ºçš„æ˜¯å››çº§å¯è°ƒï¼ˆminimal/low/medium/highï¼‰ï¼Œä¸å®é™…åŠŸèƒ½ä¸ç¬¦ã€‚

### è§£å†³æ–¹æ¡ˆ
å¼•å…¥ `reasoning_type` å­—æ®µæ¥åŒºåˆ†ä¸åŒçš„æ€è€ƒæ¨¡å¼ç±»å‹ï¼š
- **binary**: äºŒè¿›åˆ¶å¼€å…³ï¼ˆå¯ç”¨/ç¦ç”¨ï¼‰- ç”¨äºæ™ºè°±GLM
- **levels**: å››çº§å¯è°ƒï¼ˆminimal/low/medium/highï¼‰- ç”¨äºè±†åŒ…ã€DeepSeek

## âœ… å·²ä¿®æ”¹çš„å†…å®¹

### 1. æ•°æ®åº“ç»“æ„ (`lib/db.ts`)

**æ–°å¢å­—æ®µ**:
```sql
reasoning_type TEXT DEFAULT 'levels'
```

**æ¨¡å‹ç±»å‹**:
- æ™ºè°±GLM: `reasoning_type = 'binary'`
- è±†åŒ…/DeepSeek: `reasoning_type = 'levels'`

### 2. èŠå¤©ç•Œé¢ (`components/chat/reasoning-effort-selector.tsx`)

**æ ¹æ®æ¨¡å‹ç±»å‹æ˜¾ç¤ºä¸åŒçš„é€‰é¡¹**:

#### äºŒè¿›åˆ¶æ¨¡å¼ (GLM)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ§   [é€‰æ‹©å™¨ â–¼]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ç¦ç”¨æ€è€ƒ     â”‚
    â”‚ å¯ç”¨æ€è€ƒ     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å¤šçº§æ¨¡å¼ (è±†åŒ…/DeepSeek)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ§   [é€‰æ‹©å™¨ â–¼]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Minimal (ä¸æ€è€ƒ)  â”‚
    â”‚ Low (ä½)         â”‚
    â”‚ Medium (ä¸­ç­‰)    â”‚
    â”‚ High (é«˜)        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. æ¨¡å‹é…ç½®ç•Œé¢ (`components/settings/model-form.tsx`)

**æ–°å¢é…ç½®é¡¹**:
1. **æ€è€ƒç±»å‹é€‰æ‹©å™¨**:
   - äºŒè¿›åˆ¶å¼€å…³: ä»…å¯ç”¨/ç¦ç”¨ï¼ˆå¦‚æ™ºè°±GLMï¼‰
   - å¤šçº§å¯è°ƒ: æ”¯æŒå››ä¸ªçº§åˆ«ï¼ˆå¦‚è±†åŒ…ã€DeepSeekï¼‰

2. **é»˜è®¤è®¾ç½®**:
   - æ ¹æ®æ€è€ƒç±»å‹æ˜¾ç¤ºä¸åŒçš„é€‰é¡¹
   - binary: ç¦ç”¨/å¯ç”¨
   - levels: minimal/low/medium/high

3. **è‡ªåŠ¨åˆ‡æ¢**:
   - åˆ‡æ¢æ€è€ƒç±»å‹æ—¶ï¼Œè‡ªåŠ¨é‡ç½®é»˜è®¤è®¾ç½®ä¸ºåˆé€‚çš„å€¼

### 4. æ¨¡å‹åˆ—è¡¨é¡µé¢ (`app/settings/models/page.tsx`)

**æ˜¾ç¤ºä¼˜åŒ–**:
- binaryæ¨¡å‹: æ˜¾ç¤º "ğŸ§  æ€è€ƒæ¨¡å‹ (å¯ç”¨)" æˆ– "(ç¦ç”¨)"
- levelsæ¨¡å‹: æ˜¾ç¤º "ğŸ§  æ€è€ƒæ¨¡å‹ (medium)"

## ğŸ“Š æ¨¡å‹é…ç½®å¯¹æ¯”

### æ™ºè°±GLMæ¨¡å‹
```
æ¨¡å‹ID: glm-zero-preview
æ€è€ƒç±»å‹: binary
é»˜è®¤è®¾ç½®: enabled
```

**èŠå¤©ç•Œé¢æ˜¾ç¤º**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¦ç”¨æ€è€ƒ      â”‚
â”‚ å¯ç”¨æ€è€ƒ  âœ“   â”‚  â† é»˜è®¤é€‰ä¸­
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è±†åŒ…æ¨¡å‹
```
æ¨¡å‹ID: doubao-seed-1-8-251228
æ€è€ƒç±»å‹: levels
é»˜è®¤è®¾ç½®: medium
```

**èŠå¤©ç•Œé¢æ˜¾ç¤º**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Minimal (ä¸æ€è€ƒ)    â”‚
â”‚ Low (ä½)           â”‚
â”‚ Medium (ä¸­ç­‰)   âœ“   â”‚  â† é»˜è®¤é€‰ä¸­
â”‚ High (é«˜)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” å¦‚ä½•éªŒè¯

### æ­¥éª¤ 1: æŸ¥çœ‹æ•°æ®åº“é…ç½®
```bash
sqlite3 data/llm-plaza.db "SELECT id, name, reasoning_type, default_reasoning_effort FROM models WHERE is_reasoning_model = 1;"
```

**é¢„æœŸè¾“å‡º**:
```
deepseek-reasoner|DeepSeek Reasoner|levels|medium
glm-4.7-flash|GLM-4.7-FLASHï¼ˆthinkingï¼‰|binary|enabled
glm-zero-preview|GLM-Zero-Preview (æ€è€ƒ)|binary|enabled
doubao-seed-1-8-251228|doubao-seed-1.8|levels|medium
```

### æ­¥éª¤ 2: æµ‹è¯•èŠå¤©ç•Œé¢

1. **é€‰æ‹©GLMæ¨¡å‹** (glm-zero-preview)
   - âœ… åº”è¯¥æ˜¾ç¤º "ç¦ç”¨æ€è€ƒ / å¯ç”¨æ€è€ƒ" ä¸¤ä¸ªé€‰é¡¹
   - âœ… é»˜è®¤é€‰ä¸­ "å¯ç”¨æ€è€ƒ"

2. **é€‰æ‹©è±†åŒ…æ¨¡å‹** (doubao-seed-1.8)
   - âœ… åº”è¯¥æ˜¾ç¤º "Minimal / Low / Medium / High" å››ä¸ªé€‰é¡¹
   - âœ… é»˜è®¤é€‰ä¸­ "Medium"

3. **åˆ‡æ¢æ¨¡å‹**
   - âœ… UI è‡ªåŠ¨åˆ‡æ¢ä¸ºå¯¹åº”çš„é€‰æ‹©å™¨ç±»å‹

### æ­¥éª¤ 3: æµ‹è¯•é…ç½®ç•Œé¢

1. è¿›å…¥ **è®¾ç½® â†’ æ¨¡å‹**
2. ç¼–è¾‘ GLM-Zero-Preview æ¨¡å‹
3. âœ… åº”è¯¥çœ‹åˆ°:
   - æ€è€ƒæ¨¡å‹: å¼€å¯ âœ“
   - æ€è€ƒç±»å‹: äºŒè¿›åˆ¶å¼€å…³
   - é»˜è®¤è®¾ç½®: ç¦ç”¨æ€è€ƒ / å¯ç”¨æ€è€ƒ

4. ç¼–è¾‘è±†åŒ…æ¨¡å‹
5. âœ… åº”è¯¥çœ‹åˆ°:
   - æ€è€ƒæ¨¡å‹: å¼€å¯ âœ“
   - æ€è€ƒç±»å‹: å¤šçº§å¯è°ƒ
   - é»˜è®¤è®¾ç½®: Minimal / Low / Medium / High

## ğŸ¯ å·¥ä½œæµç¨‹

### ç®¡ç†å‘˜é…ç½®GLMæ¨¡å‹
1. ç¼–è¾‘æ¨¡å‹ â†’ å‹¾é€‰"æ€è€ƒæ¨¡å‹"
2. é€‰æ‹©"æ€è€ƒç±»å‹"ä¸º"äºŒè¿›åˆ¶å¼€å…³"
3. è®¾ç½®é»˜è®¤ä¸º"å¯ç”¨æ€è€ƒ"æˆ–"ç¦ç”¨æ€è€ƒ"
4. ä¿å­˜

### ç”¨æˆ·ä½¿ç”¨GLMæ¨¡å‹èŠå¤©
1. é€‰æ‹©GLMæ¨¡å‹
2. çœ‹åˆ°ç®€æ´çš„"ç¦ç”¨/å¯ç”¨"é€‰æ‹©å™¨
3. åˆ‡æ¢å¯ç”¨æˆ–ç¦ç”¨
4. å‘é€æ¶ˆæ¯

### å‚æ•°æ˜ å°„

#### GLM (binary)
- UIé€‰æ‹©"ç¦ç”¨æ€è€ƒ" â†’ API: `{"thinking": {"type": "disabled"}}`
- UIé€‰æ‹©"å¯ç”¨æ€è€ƒ" â†’ API: `{"thinking": {"type": "enabled"}}`

#### è±†åŒ…/DeepSeek (levels)
- UIé€‰æ‹©"Minimal" â†’ API: `{"reasoning_effort": "minimal"}`
- UIé€‰æ‹©"High" â†’ API: `{"reasoning_effort": "high"}`

## ğŸ“ ä¿®æ”¹çš„æ–‡ä»¶

1. `lib/db.ts` - æ·»åŠ  `reasoning_type` å­—æ®µå’Œé€»è¾‘
2. `components/chat/reasoning-effort-selector.tsx` - æ ¹æ®ç±»å‹æ˜¾ç¤ºä¸åŒUI
3. `app/page.tsx` - ä¼ é€’ `reasoning_type` ç»™é€‰æ‹©å™¨
4. `components/settings/model-form.tsx` - æ·»åŠ æ€è€ƒç±»å‹é…ç½®
5. `app/settings/models/page.tsx` - æ˜¾ç¤ºæ€è€ƒç±»å‹ä¿¡æ¯

## ğŸ‰ å®Œæˆ

ç°åœ¨æ¯ä¸ªæ¨¡å‹éƒ½æœ‰é€‚åˆè‡ªå·±çš„æ€è€ƒé…ç½®UIäº†ï¼
- âœ… GLM: ç®€æ´çš„å¯ç”¨/ç¦ç”¨å¼€å…³
- âœ… è±†åŒ…/DeepSeek: è¯¦ç»†çš„å››çº§è°ƒèŠ‚
- âœ… ç”¨æˆ·ä½“éªŒæ›´åŠ ç›´è§‚å’Œå‡†ç¡®
